{% extends 'base.html' %}

{% block title %}{{ note.title }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-start">
    <div>
        <h2>{{ note.title }}</h2>
        {% if note.folder_id %}
        <p><small>Папка №{{ note.folder_id }}</small></p>
        {% endif %}
        <p><small>Создана: {{ note.created_at }}</small></p>
    </div>
    <form method="post" action="/notes/delete/{{ note.id }}" onsubmit="return confirm('Удалить заметку?');">
        <button type="submit" class="btn btn-danger">Удалить</button>
    </form>
</div>
<hr>
<div class="mb-4">
    <!-- Display the note content as raw HTML.  We use the safe filter
         because the content contains HTML generated by the rich text editor.  In
         production you should sanitize the HTML to prevent XSS【539960806992458†L78-L119】. -->
    <div>{{ note.content|safe }}</div>
</div>
{% if attachments %}
<h4>Вложения</h4>
<ul class="list-group">
    {% for att in attachments %}
    <li class="list-group-item">
        {% if att.is_audio %}
        <audio controls preload="none" style="max-width:100%;">
            <source src="/attachments/{{ att.filepath }}" type="audio/mpeg">
            Ваш браузер не поддерживает аудио элемент.
        </audio>
        <div><small>{{ att.filename }}</small></div>
        {% else %}
        <a href="/attachments/{{ att.filepath }}" target="_blank">{{ att.filename }}</a>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}

{% endblock %}