{% extends 'base.html' %}

{% block title %}{{ note.title }}{% endblock %}

{% block content %}
<div class="minimal-card">
    <div class="d-flex justify-content-between align-items-start mb-3">
        <div>
            <h2 class="mb-1">{{ note.title }}</h2>
            {% if note.folder_id %}
            <p class="mb-1"><small class="text-muted">Папка №{{ note.folder_id }}</small></p>
            {% endif %}
            <p class="mb-0"><small class="text-muted">Создана: {{ note.created_at }}</small></p>
        </div>
        <form method="post" action="/notes/delete/{{ note.id }}" onsubmit="return confirm('Удалить заметку?');">
            <button type="submit" class="btn btn-sm btn-outline-danger">Удалить</button>
        </form>
    </div>
    <!-- Display the note content as raw HTML. We use the safe filter because the content contains HTML generated by the rich text editor. -->
    <div class="mb-3">{{ note.content|safe }}</div>
    {% if attachments %}
    <h4>Вложения</h4>
    <ul class="list-unstyled">
        {% for att in attachments %}
        <li class="mb-2">
            {% if att.is_audio %}
            <audio controls preload="none" style="width:100%;">
                <source src="/attachments/{{ att.filepath }}" type="audio/mpeg">
                Ваш браузер не поддерживает аудио элемент.
            </audio>
            <div><small>{{ att.filename }}</small></div>
            {% else %}
            <a href="/attachments/{{ att.filepath }}" target="_blank">{{ att.filename }}</a>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endblock %}